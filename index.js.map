{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-function.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n// import { page } from './index.js';\nconst API_KEY = '34886676-216aa5272081537bbb6585f7b';\n\nasync function searchPictures(query, page) {\n  const response = await axios.get(\n    ` https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo$orientation=horizontal$safesearch=true&page=${page}&per_page=40`\n  );\n\n  const images = response.data;\n\n  return images;\n}\n\nexport { searchPictures };\n","// import Notiflix from 'notiflix';\n// import { gallery } from './index.js';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// import { buttonLoad } from './index.js';\nconst gallery = document.querySelector('.gallery');\n\nfunction renderUserListItems(images) {\n  const markup = images.hits\n    .map(\n      image => `\n<div class=\"photo-card\">\n<a class=\"gallery__item\"  href=\"${image.largeImageURL}\" >\n  <img src=\"${image.webformatURL}\" alt=\"${image.tags}\"  />\n  </a>\n  <div class=\"info\">\n  \n  <p class=\"info-item\">Likes\n  <b>${image.likes}</b>\n</p>\n<p class=\"info-item\">Views\n  <b>${image.views}</b>\n</p>\n<p class=\"info-item\">Comments\n  <b>${image.comments}</b>\n</p>\n<p class=\"info-item\">Downloads\n  <b>${image.downloads}</b>\n</p>\n  </div>\n</div>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  new SimpleLightbox('.gallery a').refresh();\n}\n\nfunction clearMarkup() {\n  gallery.innerHTML = '';\n}\n\n// function hide() {\n//   buttonLoad.classList.add('unvisible-button');\n// }\n\n// function show() {\n//   buttonLoad.classList.remove('unvisible-button');\n// }\n\n// function notifySuccess(images) {\n//   if (images.total !== 0) {\n//     Notiflix.Notify.success(`Hooray ! We found ${images.totalHits} images`);\n//   }\n// }\n\nexport {\n  // renderExtraImage,\n  renderUserListItems,\n  clearMarkup,\n  // hide,\n  // show,\n  // notifySuccess,\n};\n","// import './css/styles.css';\n// import Notiflix from 'notiflix';\nimport { searchPictures } from './js/pixabay-api.js';\n\nimport {\n  renderUserListItems,\n  clearMarkup,\n  //   hide,\n  //   show,\n  //   notifySuccess,\n} from './js/render-function.js';\n\nlet page = 1;\nlet limit = 15;\n\nconst form = document.querySelector('#search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst buttonLoad = document.querySelector('.load-more');\nhide();\n\nlet name = form.elements.searchQuery;\n\nform.addEventListener('submit', findListOfPictures);\nbuttonLoad.addEventListener('click', loadAdditionalImage);\n\nasync function findListOfPictures(e) {\n  e.preventDefault();\n  hide();\n  clearMarkup();\n\n  if (page > 1) {\n    page = 1;\n    limit = 15;\n  }\n\n  try {\n    let query = name.value;\n\n    const images = await searchPictures(query, page);\n\n    if (images.total === 0 || name.value === '') {\n      toggleLoader();\n      iziToast.warning({\n        title: 'Alert',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return clearMarkup();\n    }\n\n    renderUserListItems(images);\n    toggleLoader();\n    // notifySuccess(images);\n\n    if (limit < images.totalHits) {\n      show();\n    }\n\n    page += 1;\n    limit += 15;\n  } catch (error) {\n    clearMarkup();\n    // Notiflix.Notify.failure(\n    //   'Sorry, there are no images matching your search query. Please try again.'\n    // );\n    iziToast.warning({\n      title: 'Alert',\n      message:\n        'Sorry, there are no images matching your search query. Please try again.',\n      position: 'topRight',\n    });\n    hide();\n  }\n}\n\nasync function loadAdditionalImage(query) {\n  try {\n    let query = name.value;\n\n    const images = await searchPictures(query);\n\n    renderUserListItems(images);\n    page += 1;\n    limit += 15;\n\n    if (limit >= images.totalHits) {\n      throw new Error(images.status);\n    }\n  } catch (error) {\n    // Notiflix.Notify.failure(\n    //   \"We're sorry, but you've reached the end of search results.\"\n    // );\n    iziToast.warning({\n      title: 'Alert',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n    hide();\n  }\n}\n\n// export { gallery, buttonLoad, page };\n\nfunction hide() {\n  buttonLoad.classList.add('unvisible-button');\n}\n\nfunction show() {\n  buttonLoad.classList.remove('unvisible-button');\n}\nfunction toggleLoader() {\n  loader.style.display =\n    loader.style.display === 'none' || loader.style.display === ''\n      ? 'block'\n      : 'none';\n}\n"],"names":["API_KEY","searchPictures","query","page","axios","gallery","renderUserListItems","images","markup","image","SimpleLightbox","clearMarkup","limit","form","loader","buttonLoad","hide","name","findListOfPictures","loadAdditionalImage","e","toggleLoader","show"],"mappings":"6vBAEA,MAAMA,EAAU,qCAEhB,eAAeC,EAAeC,EAAOC,EAAM,CAOzC,OANiB,MAAMC,EAAM,IAC3B,iCAAiCJ,CAAO,MAAME,CAAK,iEAAiEC,CAAI,cAC5H,GAE0B,IAG1B,CCNA,MAAME,EAAU,SAAS,cAAc,UAAU,EAEjD,SAASC,EAAoBC,EAAQ,CACnC,MAAMC,EAASD,EAAO,KACnB,IACCE,GAAS;AAAA;AAAA,kCAEmBA,EAAM,aAAa;AAAA,cACvCA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,OAK7CA,EAAM,KAAK;AAAA;AAAA;AAAA,OAGXA,EAAM,KAAK;AAAA;AAAA;AAAA,OAGXA,EAAM,QAAQ;AAAA;AAAA;AAAA,OAGdA,EAAM,SAAS;AAAA;AAAA;AAAA,OAIjB,EACA,KAAK,EAAE,EAEVJ,EAAQ,mBAAmB,YAAaG,CAAM,EAC9C,IAAIE,EAAe,YAAY,EAAE,SACnC,CAEA,SAASC,GAAc,CACrBN,EAAQ,UAAY,EACtB,CC7BA,IAAIF,EAAO,EACPS,EAAQ,GAEZ,MAAMC,EAAO,SAAS,cAAc,cAAc,EAClC,SAAS,cAAc,UAAU,EACjD,MAAMC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAa,SAAS,cAAc,YAAY,EACtDC,IAEA,IAAIC,EAAOJ,EAAK,SAAS,YAEzBA,EAAK,iBAAiB,SAAUK,CAAkB,EAClDH,EAAW,iBAAiB,QAASI,CAAmB,EAExD,eAAeD,EAAmBE,EAAG,CACnCA,EAAE,eAAc,EAChBJ,IACAL,IAEIR,EAAO,IACTA,EAAO,EACPS,EAAQ,IAGV,GAAI,CACF,IAAIV,EAAQe,EAAK,MAEjB,MAAMV,EAAS,MAAMN,EAAeC,EAAOC,CAAI,EAE/C,GAAII,EAAO,QAAU,GAAKU,EAAK,QAAU,GACvC,OAAAI,IACA,SAAS,QAAQ,CACf,MAAO,QACP,QACE,2EACF,SAAU,UAClB,CAAO,EACMV,EAAW,EAGpBL,EAAoBC,CAAM,EAC1Bc,IAGIT,EAAQL,EAAO,WACjBe,IAGFnB,GAAQ,EACRS,GAAS,EACV,MAAe,CACdD,IAIA,SAAS,QAAQ,CACf,MAAO,QACP,QACE,2EACF,SAAU,UAChB,CAAK,EACDK,GACD,CACH,CAEA,eAAeG,EAAoBjB,EAAO,CACxC,GAAI,CACF,IAAIA,EAAQe,EAAK,MAEjB,MAAMV,EAAS,MAAMN,EAAeC,CAAK,EAMzC,GAJAI,EAAoBC,CAAM,EAC1BJ,GAAQ,EACRS,GAAS,GAELA,GAASL,EAAO,UAClB,MAAM,IAAI,MAAMA,EAAO,MAAM,CAEhC,MAAe,CAId,SAAS,QAAQ,CACf,MAAO,QACP,QAAS,6DACT,SAAU,UAChB,CAAK,EACDS,GACD,CACH,CAIA,SAASA,GAAO,CACdD,EAAW,UAAU,IAAI,kBAAkB,CAC7C,CAEA,SAASO,GAAO,CACdP,EAAW,UAAU,OAAO,kBAAkB,CAChD,CACA,SAASM,GAAe,CACtBP,EAAO,MAAM,QACXA,EAAO,MAAM,UAAY,QAAUA,EAAO,MAAM,UAAY,GACxD,QACA,MACR"}