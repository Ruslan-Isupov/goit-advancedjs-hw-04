{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst API_KEY = '34886676-216aa5272081537bbb6585f7b';\n\nasync function searchPictures(query, page) {\n  const response = await axios.get(\n    ` https://pixabay.com/api/?key=${API_KEY}&q=${query}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=15`\n  );\n\n  const images = response.data;\n\n  return images;\n}\n\nexport { searchPictures };\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst lightbox = new SimpleLightbox('.gallery a');\nfunction renderUserListItems(images) {\n  const markup = images.hits\n    .map(\n      image => `\n<li class=\"photo-card\">\n<a class=\"gallery__item\"  href=\"${image.largeImageURL}\" >\n  <img src=\"${image.webformatURL}\" alt=\"${image.tags}\"  />\n  </a>\n  <div class=\"info\">\n  \n  <p class=\"info-item\">Likes\n  <b>${image.likes}</b>\n</p>\n<p class=\"info-item\">Views\n  <b>${image.views}</b>\n</p>\n<p class=\"info-item\">Comments\n  <b>${image.comments}</b>\n</p>\n<p class=\"info-item\">Downloads\n  <b>${image.downloads}</b>\n</p>\n  </div>\n</li>`\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n  lightbox.refresh();\n}\n\nfunction clearMarkup() {\n  gallery.innerHTML = '';\n}\n\nexport { renderUserListItems, clearMarkup };\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { searchPictures } from './js/pixabay-api.js';\n\nimport { renderUserListItems, clearMarkup } from './js/render-functions.js';\n\nlet page = 1;\nlet allCards = 15;\n\nconst form = document.querySelector('#search-form');\nconst load = document.querySelector('.loader');\nconst buttonLoad = document.querySelector('.load-more');\n\nlet nameQuery = '';\n\nclass LoaderService {\n  constructor(el) {\n    this.loader = el;\n  }\n\n  hide() {\n    this.loader.style.display = '';\n  }\n\n  show() {\n    this.loader.style.display = 'block';\n  }\n}\n\nfunction smoothScroll() {\n  const galleryCard = document.querySelector('.photo-card');\n  if (galleryCard) {\n    const cardHeight = galleryCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n  }\n}\n\nconst loadMoreBtn = new LoaderService(buttonLoad);\nconst loader = new LoaderService(load);\n\nform.addEventListener('submit', findListOfPictures);\n\nasync function findListOfPictures(e) {\n  e.preventDefault();\n  nameQuery = form.elements.searchQuery.value.trim();\n  if (nameQuery === '') {\n    iziToast.warning({\n      title: 'Alert',\n      message: 'You need to put world for searching',\n      position: 'topRight',\n    });\n    return;\n  }\n  clearMarkup();\n  try {\n    loader.show();\n    loadMoreBtn.hide();\n    if (page > 1) {\n      page = 1;\n      allCards = 15;\n    }\n    const images = await searchPictures(nameQuery, page);\n    if (images.total === 0) {\n      iziToast.warning({\n        title: 'Alert',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      loader.hide();\n      return clearMarkup();\n    }\n    renderUserListItems(images);\n    smoothScroll();\n    loader.hide();\n    loadMoreBtn.show();\n    buttonLoad.addEventListener('click', loadAdditionalImage);\n  } catch (err) {\n    clearMarkup();\n    iziToast.warning({\n      title: 'Alert',\n      message: err.message,\n      position: 'topRight',\n    });\n    loader.hide();\n  } finally {\n    form.reset();\n  }\n}\n\nasync function loadAdditionalImage() {\n  loader.show();\n  loadMoreBtn.hide();\n  page += 1;\n  allCards += 15;\n  try {\n    const images = await searchPictures(nameQuery, page);\n    if (images.totalHits <= allCards) {\n      renderUserListItems(images);\n      loadMoreBtn.hide();\n      loader.hide();\n      iziToast.warning({\n        title: 'Alert',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      allCards = 15;\n      page = 1;\n      buttonLoad.removeEventListener('click', loadAdditionalImage);\n\n      return;\n    }\n    renderUserListItems(images);\n    smoothScroll();\n    loader.hide();\n    loadMoreBtn.show();\n  } catch (error) {\n    iziToast.warning({\n      title: 'Alert',\n      message: error.message,\n      position: 'topRight',\n    });\n    loadMoreBtn.hide();\n    loader.hide();\n  }\n}\n"],"names":["API_KEY","searchPictures","query","page","axios","gallery","lightbox","SimpleLightbox","renderUserListItems","images","markup","image","clearMarkup","allCards","form","load","buttonLoad","nameQuery","LoaderService","el","smoothScroll","galleryCard","cardHeight","loadMoreBtn","loader","findListOfPictures","iziToast","loadAdditionalImage","err","error"],"mappings":"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"}